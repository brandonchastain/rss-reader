@page "/posts"
@inherits PostPageBase
@rendermode InteractiveServer
@attribute [StreamRendering]
@inject ILogger<Posts> logger
@inject IJSRuntime jsRuntime

<PageTitle>Posts</PageTitle>
<AuthorizeView>

Posts from @(FeedUrl)

<CascadingValue Value="@Page" Name="Page">
<CascadingValue Value="@Items" Name="Posts">
    <PostTable OnPageChanged="UpdatePage" OnRefreshTriggered="RefreshItems"/>
</CascadingValue>
</CascadingValue>

@code {

    [SupplyParameterFromQuery]
    public string FeedUrl { get; set; }

    protected override async Task<List<NewsFeedItem>> GetPostsAsync()
    {
        var decodedUrl = System.Net.WebUtility.UrlDecode(FeedUrl);
        var posts = await this.feedClient.GetFeedItemsAsync(new NewsFeed(decodedUrl, this.CurrentUser.Id), Page);
        return posts?.ToList() ?? new List<NewsFeedItem>();
    }
}
</AuthorizeView>